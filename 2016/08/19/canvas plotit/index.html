<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>关于Canvas图片处理的一二事（上） | FGT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="canvas" />
    
    <meta name="description" content="CanvasRenderingContext2DCanvasRenderingContext2D 接口提供的 2D 渲染上下文用来绘制 &amp;lt;canvas&amp;gt; 元素，为了获得这个接口的对象，需要在 &amp;lt;canvas&amp;gt; 上调用 getContext() ，并提供一个 &amp;#39;2d&amp;#39; 的参数：
12var $canvas = document.getElementById(&apos;">
<meta property="og:type" content="article">
<meta property="og:title" content="关于Canvas图片处理的一二事（上）">
<meta property="og:url" content="http://alifgt.github.io/2016/08/19/canvas plotit/index.html">
<meta property="og:site_name" content="FGT">
<meta property="og:description" content="CanvasRenderingContext2DCanvasRenderingContext2D 接口提供的 2D 渲染上下文用来绘制 &amp;lt;canvas&amp;gt; 元素，为了获得这个接口的对象，需要在 &amp;lt;canvas&amp;gt; 上调用 getContext() ，并提供一个 &amp;#39;2d&amp;#39; 的参数：
12var $canvas = document.getElementById(&apos;">
<meta property="og:image" content="https://mdn.mozillademos.org/files/225/Canvas_drawimage.jpg">
<meta property="og:updated_time" content="2016-08-19T01:40:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于Canvas图片处理的一二事（上）">
<meta name="twitter:description" content="CanvasRenderingContext2DCanvasRenderingContext2D 接口提供的 2D 渲染上下文用来绘制 &amp;lt;canvas&amp;gt; 元素，为了获得这个接口的对象，需要在 &amp;lt;canvas&amp;gt; 上调用 getContext() ，并提供一个 &amp;#39;2d&amp;#39; 的参数：
12var $canvas = document.getElementById(&apos;">
<meta name="twitter:image" content="https://mdn.mozillademos.org/files/225/Canvas_drawimage.jpg">
    

    

    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/titillium-web/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">
    
    
        <link rel="stylesheet" href="/vendor/scrollLoading/style.css">
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?af53e54422ba934b74dc6635952d04bd# enter Baidu Analytics hash key";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">阿里集团客户体验事业群前端团队</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/web开发/">web开发</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/移动开发/">移动开发</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/资源工具/">资源工具</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/IRIS翻译社/">IRIS翻译社</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/团队生活/">团队生活</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/joinus.html">加入我们</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/web开发/">web开发</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-canvas plotit" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        关于Canvas图片处理的一二事（上）
        </h1>
    

            </header>
        
        <div class="article-subtitle">
            <a href="/2016/08/19/canvas plotit/" class="article-date">
    <time datetime="2016-08-19T01:39:21.000Z" itemprop="datePublished">2016-08-19</time>
</a>
            
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

            &nbsp;&nbsp;照澄

        </div>
        <div class="article-entry" itemprop="articleBody">
            <h2 id="CanvasRenderingContext2D"><a href="#CanvasRenderingContext2D" class="headerlink" title="CanvasRenderingContext2D"></a>CanvasRenderingContext2D</h2><p><code>CanvasRenderingContext2D</code> 接口提供的 2D 渲染上下文用来绘制 <code>&lt;canvas&gt;</code> 元素，为了获得这个接口的对象，需要在 <code>&lt;canvas&gt;</code> 上调用 <code>getContext()</code> ，并提供一个 <code>&#39;2d&#39;</code> 的参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">var</span> context = $canvas.getContext(<span class="string">'2d'</span>);</span><br></pre></td></tr></table></figure>
<p>关于所有Canvas所有二维操作都在 <code>context</code> 上进行。</p>
<h2 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h2><p>关于图片上传一般都由 <code>&lt;input id=&quot;input&quot; type=&quot;file&quot;&gt;</code>，通过 <code>var file = $(&#39;#input&#39;)[0].files[0];</code> 可以获取到 <code>file</code> 对象。</p>
<p>处理 <code>file</code> 对象可以使用两种处理API，即：</p>
<ul>
<li><strong>FileReader.readAsDataURL()</strong></li>
</ul>
<blockquote>
<p>The readAsDataURL method is used to read the contents of the specified Blob or File. When the read operation is finished, the readyState becomes DONE, and the loadend is triggered. At that time, the result attribute contains  the data as a URL representing the file’s data as a base64 encoded string.</p>
<p>from <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsDataURL" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsDataURL</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line"></span><br><span class="line">reader.onload = (e) =&gt; &#123;</span><br><span class="line">  image.src = e.target.result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">reader.readAsDataURL(file);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>URL.createObjectURL()</strong></li>
</ul>
<blockquote>
<p>The URL.createObjectURL() static method creates a DOMString containing an URL representing the object given in parameter. The URL lifetime is tied to the document in the window on which it was created. The new object URL represents the specified File object or Blob object.</p>
<p>from <a href="https://developer.mozilla.org/en/docs/Web/API/URL/createObjectURL" target="_blank" rel="external">https://developer.mozilla.org/en/docs/Web/API/URL/createObjectURL</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> objectURL = URL.createObjectURL(blob);</span><br></pre></td></tr></table></figure>
<p>两者不同在于 <code>FileReader</code> 提供多种文件格式获取的方法，<code>readAsDataURL</code>只是其中一种，<code>createObjectURL</code> 则是简单粗暴获取文件的URL。</p>
<h2 id="图片渲染"><a href="#图片渲染" class="headerlink" title="图片渲染"></a>图片渲染</h2><h3 id="drawImage"><a href="#drawImage" class="headerlink" title="drawImage"></a>drawImage</h3><p><code>drawImage</code>可以有三种形式的用法，分别接受不同数量的参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctx.drawImage(image, dx, dy);</span><br><span class="line">ctx.drawImage(image, dx, dy, dWidth, dHeight);</span><br><span class="line">ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</span><br></pre></td></tr></table></figure>
<p>具体可以根据下图理解参数含义：</p>
<p><img src="https://mdn.mozillademos.org/files/225/Canvas_drawimage.jpg" alt=""></p>
<p><strong>帮助理解的一些注意事项：</strong></p>
<ul>
<li><p><strong>image</strong> 为Image 对象，src 为上传文件生成的Base64格式编码</p>
</li>
<li><p><strong>d[…]</strong> d: destination 目标画布</p>
</li>
<li><p><strong>s[…]</strong> s: source 原图片</p>
</li>
<li><p><strong>(x, y)</strong> 坐标轴，s: 图片选取位置 / d: 绘制初始位置</p>
</li>
<li><p><strong>(width, height)</strong> s: 图像选取宽高 / d: 映射图像大小</p>
</li>
</ul>
<h2 id="图片上传渲染流程图"><a href="#图片上传渲染流程图" class="headerlink" title="图片上传渲染流程图"></a>图片上传渲染流程图</h2><p>本地图片上传通过获取其Base64编码值，赋值到 Image 对象上，通过 <code>canvas</code> 提供的 <code>drawImage</code> API 就可以会绘制到画布上。</p>
<p><img src="https://img.alicdn.com/tps/TB1CxORLpXXXXXPXFXXXXXXXXXX-1014-679.png" alt=""></p>
<h2 id="像素操作"><a href="#像素操作" class="headerlink" title="像素操作"></a>像素操作</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>像素操作分为三步，与 <code>canvas</code> 相关的API一个为获取像素API <code>getImageData</code>，另一个为处理像素后返回画布的API <code>putImageData</code>。</p>
<h4 id="getImageData"><a href="#getImageData" class="headerlink" title="getImageData"></a>getImageData</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.getImageData(sx, sy, sWidth, sHeight);</span><br></pre></td></tr></table></figure>
<p><strong>返回值</strong></p>
<p>一个ImageData 对象，包含canvas给定的矩形图像数据: <code>width / height / data(pixelArray)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">ctx.rect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">ctx.fill();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ctx.getImageData(<span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">100</span>));</span><br><span class="line"><span class="comment">// ImageData &#123; width: 100, height: 100, data: Uint8ClampedArray[40000] &#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="putImageData"><a href="#putImageData" class="headerlink" title="putImageData"></a>putImageData</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.putImageData(imagedata, dx, dy);</span><br><span class="line">ctx.putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight);</span><br></pre></td></tr></table></figure>
<p>imageData 为 canvas ImageData 对象，<code>dirty[...]</code> 等同于 <code>s(ource)[...]</code></p>
<h2 id="像素操作流程图"><a href="#像素操作流程图" class="headerlink" title="像素操作流程图"></a>像素操作流程图</h2><h4 id="ImageData"><a href="#ImageData" class="headerlink" title="ImageData"></a>ImageData</h4><p><strong>属性</strong></p>
<ul>
<li><p><strong>ImageData.data</strong> 只读 Uint8ClampedArray 描述了一个一维数组，包含以 RGBA 顺序的数据，数据使用  0 至 255（包含）的整数表示。 </p>
</li>
<li><p><strong>ImageData.height</strong> 只读 无符号长整型（unsigned long），使用像素描述 ImageData 的实际高度。</p>
</li>
<li><p><strong>ImageData.width</strong> 只读 无符号长整型（unsigned long），使用像素描述 ImageData 的实际宽度。</p>
</li>
</ul>
<p><code>Imagedata.data</code> 所包含的数据为画布整个图像的所有像素值，一共分为4部分：R，G，B，A。前三个值，红色通道、绿色通道、蓝色通道组成了我们日常所见的颜色，最后为 Alpha 值，表示其颜色透明度。</p>
<p>整个像素操作的流程图如下所示：</p>
<p><img src="https://img.alicdn.com/tps/TB1XdSwLpXXXXa.apXXXXXXXXXX-1014-777.png" alt=""></p>
<h2 id="滤镜图层"><a href="#滤镜图层" class="headerlink" title="滤镜图层"></a>滤镜图层</h2><p>滤镜图层是叠加在原图像上的，总共可以用到一下几个API：</p>
<ul>
<li><p><strong>CanvasRenderingContext2D.globalAlpha</strong> 设置全局画布的透明度值</p>
<p>  <code>ctx.globalAlpha = value;</code> </p>
</li>
<li><p><strong>CanvasRenderingContext2D.createLinearGradient</strong> 绘制线性渐变</p>
<p>  <code>ctx.createLinearGradient(x0, y0, x1, y1);</code>     </p>
<ul>
<li><code>x0</code> 起点的 x 轴坐标。</li>
<li><code>y0</code> 起点的 y 轴坐标。</li>
<li><code>x1</code> 终点的 x 轴坐标。</li>
<li><code>y1</code> 终点的 y 轴坐标。</li>
</ul>
</li>
<li><p><strong>CanvasRenderingContext2D.createRadialGradient</strong> 绘制径向渐变</p>
<p>  <code>ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);</code> </p>
<ul>
<li><code>x0</code> 开始圆形的 x 轴坐标。</li>
<li><code>y0</code> 开始圆形的 y 轴坐标。</li>
<li><code>r0</code> 开始圆形的半径。</li>
<li><code>x1</code> 结束圆形的 x 轴坐标。</li>
<li><code>y1</code> 结束圆形的 y 轴坐标。</li>
<li><code>r1</code> 结束圆形的半径。</li>
</ul>
</li>
<li><p><strong>CanvasGradient.addColorStop</strong> 渐变对象提供多层颜色渲染</p>
<p>  <code>createLinearGradient</code> 和 <code>createRadialGradient</code> 都会返回一个 <code>CanvasGradient</code> 对象。它提供一个方法做多层渐变处理：<code>addColorStop(offset, color)</code></p>
<ul>
<li><code>offset</code> 0到1之间的值</li>
<li><code>color</code> CSS颜色值 <color></color></li>
</ul>
</li>
</ul>
<h4 id="栗子"><a href="#栗子" class="headerlink" title="栗子:"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient" target="_blank" rel="external">栗子</a>:</h4><ul>
<li><strong>Code:</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">var</span> ctx = $canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gradient = ctx.createRadialGradient(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">gradient.addColorStop(<span class="number">0</span>,<span class="string">"white"</span>);</span><br><span class="line">gradient.addColorStop(<span class="number">1</span>,<span class="string">"green"</span>);</span><br><span class="line"></span><br><span class="line">ctx.fillStyle = gradient;</span><br><span class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Result:</strong></li>
</ul>
<p><img src="https://img.alicdn.com/tps/TB11l53LpXXXXaPXXXXXXXXXXXX-400-200.png" alt=""></p>
<h2 id="图片合成"><a href="#图片合成" class="headerlink" title="图片合成"></a>图片合成</h2><p>图片合成即将添加图层通过 <code>drawImage</code> 绘制在原图像上，如下图所示：</p>
<p><img src="https://img.alicdn.com/tps/TB1TzO3LpXXXXa7XXXXXXXXXXXX-1189-448.png" alt=""></p>
<h2 id="图片导出"><a href="#图片导出" class="headerlink" title="图片导出"></a>图片导出</h2><p>图片导出通过 <code>toDataURL</code> API获得当前画布的Base64编码值，可以直接赋值到 Image 对象上展示出来，也可以上传到七牛云获取在线链接后赋值给 <code>&lt;img&gt;</code>，如下图所示：</p>
<p><img src="https://img.alicdn.com/tps/TB18OC1LpXXXXckXXXXXXXXXXXX-1144-698.png" alt=""></p>
<h1 id="PlotIt"><a href="#PlotIt" class="headerlink" title="PlotIt"></a>PlotIt</h1><p><a href="https://g.alicdn.com/hub/plotit/1.0.0/index.html" target="_blank" rel="external">试玩DEMO</a></p>
<h2 id="基础调节"><a href="#基础调节" class="headerlink" title="基础调节"></a>基础调节</h2><p>基础调节功能的实现依赖 HTML Canvas对图片的像素级处理即位图操作。</p>
<p>基础属性调节是对图片的每一个像素进行遍历处理，通过不同的属性值调节，将图片每一个像素做对应基础处理，即完成基础调节效果。</p>
<h3 id="亮度"><a href="#亮度" class="headerlink" title="亮度"></a>亮度</h3><p>亮度的调节原理在于将每个通道的颜色值同时增加或者减少，达到提亮或者变暗的效果。</p>
<h4 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h4><p><img src="https://img.alicdn.com/tps/TB14eWKLpXXXXXHXVXXXXXXXXXX-1348-692.png" alt=""></p>
<h4 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h4><p><img src="https://img.alicdn.com/tps/TB1SiO3LpXXXXbuXXXXXXXXXXXX-759-367.png" alt=""></p>
<h3 id="灰度"><a href="#灰度" class="headerlink" title="灰度"></a>灰度</h3><p>灰度的原理在于将所有通道值都设为统一值，综合起来即为灰色。以下每个通道的处理值是经过研究后发现显示灰度效果最合适的值。</p>
<h4 id="原理图-1"><a href="#原理图-1" class="headerlink" title="原理图"></a>原理图</h4><p><img src="https://img.alicdn.com/tps/TB1STGULpXXXXbOXpXXXXXXXXXX-1316-683.png" alt=""></p>
<h4 id="结果展示-1"><a href="#结果展示-1" class="headerlink" title="结果展示"></a>结果展示</h4><p><img src="https://img.alicdn.com/tps/TB1y61YLpXXXXXVXpXXXXXXXXXX-758-357.png" alt=""></p>
<h2 id="添加滤镜"><a href="#添加滤镜" class="headerlink" title="添加滤镜"></a>添加滤镜</h2><h4 id="Toaster"><a href="#Toaster" class="headerlink" title="Toaster"></a>Toaster</h4><p>这款滤镜首先要绘制一个带两层色彩的径向渐变图层：</p>
<p><img src="https://img.alicdn.com/tps/TB129OGLpXXXXc9XVXXXXXXXXXX-957-742.png" alt=""></p>
<p>通过合成滤镜图层，再做一些基础调节的工作后，滤镜添加完毕：</p>
<p><img src="https://img.alicdn.com/tps/TB1LxqCLpXXXXaKaXXXXXXXXXXX-1584-673.png" alt=""></p>
<hr>
<p>以上是 Canvas 图片处理，以及 PlotIt 处理原理的简单介绍，后续会添加图片剪裁功能，敬请期待~</p>
<p>END.</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://alifgt.github.io/2016/08/19/canvas plotit/" data-id="cis13ady500073qnt70dx436w" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2016/08/19/canvas plotit/" data-title="关于Canvas图片处理的一二事（上）" data-url="http://alifgt.github.io/2016/08/19/canvas plotit/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我们 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/alifgt/" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2016/08/12/移动端的头部标签和 meta/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">移动端的头部标签和meta</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/19/canvas plotit/" class="thumbnail">
    
    
        <span style="background-image:url(https://mdn.mozillademos.org/files/225/Canvas_drawimage.jpg)" alt="关于Canvas图片处理的一二事（上）" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/web开发/">web开发</a></p>
                            <p class="item-title"><a href="/2016/08/19/canvas plotit/" class="title">关于Canvas图片处理的一二事（上）</a></p>
                            <p class="item-date"><time datetime="2016-08-19T01:39:21.000Z" itemprop="datePublished">2016-08-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/12/移动端的头部标签和 meta/" class="thumbnail">
    
    
        <span style="background-image:url(https://img.alicdn.com/tps/TB14x86LpXXXXXVXFXXXXXXXXXX-720-272.jpg)" alt="移动端的头部标签和meta" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/移动开发/">移动开发</a></p>
                            <p class="item-title"><a href="/2016/08/12/移动端的头部标签和 meta/" class="title">移动端的头部标签和meta</a></p>
                            <p class="item-date"><time datetime="2016-08-12T02:36:18.000Z" itemprop="datePublished">2016-08-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/12/debounce-and-throttle/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xir1p.com1.z0.glb.clouddn.com/debounce-vs-throttle-v1.png)" alt="Debounce 和 Throttle 的原理及实现" class="thumbnail-image"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/web开发/">web开发</a></p>
                            <p class="item-title"><a href="/2016/08/12/debounce-and-throttle/" class="title">Debounce 和 Throttle 的原理及实现</a></p>
                            <p class="item-date"><time datetime="2016-08-12T02:26:33.000Z" itemprop="datePublished">2016-08-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/12/学习 git，从此不再枯燥无味/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/web开发/">web开发</a></p>
                            <p class="item-title"><a href="/2016/08/12/学习 git，从此不再枯燥无味/" class="title">学习 git，从此不再枯燥无味</a></p>
                            <p class="item-date"><time datetime="2016-08-12T02:10:58.000Z" itemprop="datePublished">2016-08-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/08/05/Gentle explanation of 'this' keyword in JavaScript/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>
                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/IRIS翻译社/">IRIS翻译社</a></p>
                            <p class="item-title"><a href="/2016/08/05/Gentle explanation of 'this' keyword in JavaScript/" class="title">Gentle explanation of &#39;this&#39; keyword in JavaScript</a></p>
                            <p class="item-date"><time datetime="2016-08-05T02:43:44.000Z" itemprop="datePublished">2016-08-05</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IRIS翻译社/">IRIS翻译社</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web开发/">web开发</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动开发/">移动开发</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/资源工具/">资源工具</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/h5/">h5</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/throttle/">throttle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性能/">性能</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/h5/" style="font-size: 10px;">h5</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/meta/" style="font-size: 10px;">meta</a> <a href="/tags/react/" style="font-size: 20px;">react</a> <a href="/tags/throttle/" style="font-size: 10px;">throttle</a> <a href="/tags/性能/" style="font-size: 10px;">性能</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://taobaofed.org">淘宝FED</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2016 FGT TEAM</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'alifgt'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>
    

    
        <script src="/vendor/scrollLoading/jquery.scrollLoading.js"></script>
        <script src="/vendor/scrollLoading/main.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
